plugins {
    id 'io.micronaut.build.internal.oraclecloud-kotlin-example'
}

dependencies {
    annotationProcessor mn.micronaut.graal
    implementation libs.kotlin.reflect
    implementation libs.kotlin.stdlib
    implementation mn.micronaut.kotlin.runtime
    implementation mn.micronaut.runtime
    implementation mn.reactor
    implementation projects.oraclecloudFunctionHttp
    runtimeOnly libs.fn.runtime
    runtimeOnly mn.jackson.module.kotlin
    runtimeOnly mn.slf4j.simple
    testAnnotationProcessor mn.micronaut.inject.java
    testImplementation mn.micronaut.test.junit5
    testImplementation projects.oraclecloudFunctionHttpTest
    testRuntimeOnly libs.junit.jupiter
}

application.mainClass.set 'com.fnproject.fn.runtime.EntryPoint'

run {
    args('io.micronaut.oraclecloud.function.http.HttpFunction::handleRequest')
}

compileKotlin {
    kotlinOptions {
        jvmTarget = '1.8'
        javaParameters = true
    }
}
compileTestKotlin {
    kotlinOptions {
        jvmTarget = '1.8'
        javaParameters = true
    }
}
