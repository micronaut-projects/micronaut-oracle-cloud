plugins {
    id("io.micronaut.build.internal.bom")
    id("io.micronaut.build.internal.oraclecloud-bom")
}

dependencies {
    constraints {
        for (name in gradle.ociArtifacts) {
            api "com.oracle.oci.sdk:$name:$gradle.ociVersion"
        }

        for (module in ['api', 'runtime', 'testing-junit4']) {
            api "com.fnproject.fn:$module:${libs.fn.api.get().version}"
        }
    }
}

micronautBuild {
    def simpleVersion = version
    if (version.contains('-')) {
        simpleVersion = version.substring(0, version.indexOf('-'))
    }
    def (String major, String minor, String patch) = simpleVersion.split("[.]")
    binaryCompatibility.enabled = major.toInteger() >=3 && minor.toInteger() >= 1 && patch.toInteger() > 0
}
