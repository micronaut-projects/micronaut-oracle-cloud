plugins {
    id 'io.micronaut.build.internal.oraclecloud-module'
}

dependencies {
    annotationProcessor projects.oraclecloudSdkProcessor
    api projects.oraclecloudCommon, {
        exclude group:'commons-logging', module:'commons-logging'
    }
    compileOnly mn.graal
    compileOnly mn.rxjava2
    testImplementation mn.graal
    testImplementation mn.micronaut.test.spock
    testImplementation mn.rxjava2
    testImplementation mn.spock

    // optional modules
    for (name in gradle.ociBom.dependencyManagement.dependencies.dependency.artifactId*.text()) {
        compileOnly "com.oracle.oci.sdk:$name:$ociVersion"
        testImplementation "com.oracle.oci.sdk:$name:$ociVersion"
        annotationProcessor "com.oracle.oci.sdk:$name:$ociVersion"
    }
}

spotlessJavaMiscCheck.enabled = false
compileJava.options.fork = true

// TODO temporarily disable binary compatibility checks
micronautBuild {
    binaryCompatibility {
        enabled = false
    }
}
