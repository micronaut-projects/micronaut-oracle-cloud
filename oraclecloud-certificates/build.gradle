plugins {
    id 'io.micronaut.build.internal.oraclecloud-module'
}

dependencies {
    api projects.micronautOraclecloudBmcCertificates
    api mn.micronaut.inject
    implementation projects.micronautOraclecloudSdk
    implementation mn.micronaut.http.server
    implementation mn.micronaut.http.server.netty
    compileOnly libs.netty.incubator.codec.http3

    testImplementation mn.micronaut.inject.groovy
    testImplementation mnTest.micronaut.test.spock
}

micronautBuild {
    def simpleVersion = version
    if (version.contains('-')) {
        simpleVersion = version.substring(0, version.indexOf('-'))
    }
    def (String major, String minor, String patch) = simpleVersion.split("[.]")
    binaryCompatibility.enabled = major.toInteger() >=3 && minor.toInteger() >= 1 && patch.toInteger() > 0
}
