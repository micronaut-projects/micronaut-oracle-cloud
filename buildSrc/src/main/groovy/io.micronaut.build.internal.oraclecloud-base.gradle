plugins {
    id 'java'
}

repositories {
    repositories {
        mavenCentral()
    }
}

dependencies {
    testImplementation mnTest.micronaut.test.junit5
    testRuntimeOnly libs.junit.jupiter
    testAnnotationProcessor mn.micronaut.inject.java
    testRuntimeOnly mnSerde.micronaut.serde.jackson
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8'
    options.compilerArgs.addAll([
            '-parameters',
            // enables incremental compilation
            '-Amicronaut.processing.incremental=true',
            '-Amicronaut.processing.annotations=io.micronaut.oraclecloud.*',
            "-Amicronaut.processing.group=$project.group",
            "-Amicronaut.processing.module=$project.name",
    ])
}

micronautBuild {
    checkstyleVersion = "10.5.0"
}

afterEvaluate {
    java {
        toolchain.languageVersion.convention(null)
        toolchain.languageVersion.set(null)
        sourceCompatibility = 17
        targetCompatibility = 17
    }
}

configurations.all {
    resolutionStrategy.preferProjectModules()
}

// configurations.all {
//     resolutionStrategy.dependencySubstitution {
//         substitute(module('commons-logging:commons-logging'))
//                 .using(module('org.slf4j:jcl-over-slf4j:1.7.33'))
//     }
// }
