plugins {
    id 'io.micronaut.minimal.application'
    id 'io.micronaut.build.internal.oraclecloud-base'
}

repositories {
    maven { url "https://s01.oss.sonatype.org/content/repositories/snapshots/" }
}

micronaut {
    version '4.0.0-SNAPSHOT'
}
dependencies {
    implementation(libs.oci.objectstorage) {
        exclude group: 'org.javassist', module: 'javassist'
    }
    annotationProcessor mnValidation.micronaut.validation.processor
    implementation mnValidation.micronaut.validation
    implementation projects.micronautOraclecloudSdk
    testImplementation mn.micronaut.http.client
    testRuntimeOnly mn.micronaut.jackson.databind
}

if (JavaVersion.current().isCompatibleWith(JavaVersion.toVersion(19))) {
    plugins.withId('org.graalvm.buildtools.native') {
        graalvmNative.binaries.all {
            buildArgs.add('--enable-preview')
        }
    }
}

